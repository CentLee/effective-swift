# Item 70. 복구할 수 있는 상황에는 검사 예외를, 프로그래밍 오류에는 런타임 예외를 사용하라 

이번 아이템에서는 자바, 오브젝티브 씨, 스위프트 각각의 예외 종류를 알아보고 각 언어에서 예외(또는 오류)를 어떻게 사용하는게 좋은지 알아봅니다. 

# Java 

자바는 문제 상활을 알리는 타입(Throwable)으로 검사 예외, 런타임 예외, 에러 이렇게 세 가지를 제공하는데, 언제 무엇을 사용해야 하는지 헷갈려 하는 프로그래머들이 종종 있습니다.
언제나 100% 명확한 건 아니지만 이럴 때 참고하면 좋은 멋진 지침들이 있으니 함께 살펴봅시다. 

우선 자바의 예외 종류에 대해 알아봅시다. 

## 자바 예외 및 에러의 종류

<img width="400" alt="자바 에러 구조" src="https://user-images.githubusercontent.com/38216027/113489978-5399e580-9502-11eb-9d98-0f8b591a3ca8.png">

  * 검사 예외: 검사 예외(Checked Exception)는 어플리케이션 수행 중에 일어날법한 예외를 검사하고 개발자가 대비하라는 목적으로 사용합니다. **검사 예외는 반드시 예외처리를 해야 합니다.** 따라서 try-catch로 에러를 처리하거나 throw를 이용해 위로 에러를 던져야 합니다(예외 처리를 하지 않으면 컴파일 에러가 발생합니다). 예외 처리를 해야한다는 뜻은 **개발자가 사전에 처리할 수 있는 에러를 뜻합니다.** 대표적인 예외로 `IOException`이 있습니다.
  
  * 비검사 예외: 비검사 예외(UnChecked Exception)는 Runtime Exception를 상속한 예외로 **프로그래머의 실수로 발생하는 예외입니다. 비검사 예외는 검사 예외와 달리 예외 처리를 강제하지 않습니다.** 런타임 에러를 발생시키는 에러들로 처리할수 없기 때문에 예외 처리를 강제하지 않습니다. 다만, 비검사예외도 예외 처리를 할 수 있기 때문에 예외 처리만 한다면 런타임 에러는 발생하지 않습니다, 하지만 좋지 않은 방법입니다. 그로 인한 더 큰 side effect가 일어날 겁니다.(알고리즘 문제를 `IndexOutOfBoundsException`을 예외처리하여 성공시킨 코드를 한번쯤은 보셨을 겁니다). 대표적인 예외로 `IndexOutOfBoundsException`, `NullPointerException` 등이 있습니다. 
  
  * 에러: 에러(Error)는 보통 JVM이 자원 부족, 불변식 깨짐 등 더 이상 수행을 계속할 수 없는 상황을 나타낼 때 사용합니다. 따라서 개발자가 미리 예측하여 처리할 수 없기 때문에, **애플리케이션에서 오류에 대한 처리를 신경 쓰지 않아도 됩니다.**

## 호출하는 쪽에서 복구하리라 여기지는 상황이라면 검사 예외를 사용하라

검사 예외를 던지면 호출자가 그 예외를 catch로 잡아 처리하거나 더 바깥으로 전파하도록 **강제하게 됩니다.**
따라서 API 설계자는 호출하는 쪽에서 복구하리라 여기지는 상황이라 판단되면 API 사용자에게 검사 예외를 던져주어 그 상황에서 회복해내라고 요구하면 됩니다.

검사 예외는 일반적으로 복구할 수 있는 조건일 때 발생합니다. 따라서 호출자가 예외 상황에서 벗어나는 데 필요한 정보를 알려주는 메서드를 함께 제공하는 것이 중요합니다. 예컨대 쇼핑몰에서 물건을 구입하려는 데 카드 잔고가 부족하여 검사 예외가 발생했다고 해봅시다. 그렇다면 이 예외는 잔고가 얼마나 부족한지를 알려주는 접근자 메서드를 제공해야 합니다.

## 프로그래밍 오류를 나타낼 때는 런타임 예외를 사용하라

비검사 throwable은 두 가지로, 바로 런타임 예외와 에러입니다. 둘 다 동작 측면에서는 다르지 않습니다. 이 둘은 프로그램에서 잡을 필요가 없거나 혹은 통상적으로는 **잡지 말아야 합니다.** 
**프로그램에서 비검사 예외나 에러를 던졌다는 것은 복구가 불가능하거나 더 실행해봐야 득보다는 실이 많다는 뜻이기 때문입니다.** 

이 두가지 비검사 throwable 중에서 **프로그래밍 오류를 나타낼 때는 런타임 예외를 사용해야 합니다.** 런타임 예외의 대부분은 전제조건을 만족하지 못했을 때 발생합니다. 전제조건 위배란 단순히 클라이언트가 해당 API의 명세에 기록된 제약을 지키지 못했다는 뜻입니다. 예컨대 배열의 인덱스는 0에서 '배열 크기 -1' 사이어야 합니다. `ArrayIndexOutOfBoundsException`이 발생했다는 건 이 전제조건이 지켜지지 않았다는 뜻입니다. 

## Error 클래스는 사용하지 말자

위에서 말씀드렸든 Error 는 보통 JVM이 자원 부족, 불변식 깨짐 등 더이상 수행을 계속할 수 없는 상황을 나타낼 때 사용합니다. 따라서 JVM 관련 상황에서만 사용되므로 Error 클래스를 상속해 하위 클래스를 만드는 일은 자제해야 합니다. **다시 말해 우리가 구현하는 비검사 throwable은 모두 런타임 예외(RuntimeException)의 하위 클래스여야 합니다.**

# Objective-C



# Swift


